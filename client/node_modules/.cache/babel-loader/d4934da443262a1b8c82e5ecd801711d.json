{"ast":null,"code":"import _objectSpread from\"/Users/Josephine/Documents/Integrify-full-stack/full-stack-4-typescript-men-boilerplate/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import jwt from\"jsonwebtoken\";import{SIGN_IN_FAILURE,SIGN_IN_REQUEST,SIGN_IN_SUCCESS,SIGN_UP_FAILURE,SIGN_UP_REQUEST,SIGN_UP_SUCCESS,SIGN_OUT_FAILURE,SIGN_OUT_REQUEST,SIGN_OUT_SUCCESS,FORGOT_PASSWORD_FAILURE,FORGOT_PASSWORD_REQUEST,FORGOT_PASSWORD_SUCCESS,RESET_PASSWORD_FAILURE,RESET_PASSWORD_REQUEST,RESET_PASSWORD_SUCCESS,GOOGLE_SIGN_IN_FAILURE,GOOGLE_SIGN_IN_REQUEST,GOOGLE_SIGN_IN_SUCCESS,UPDATE_USER_FAILURE,UPDATE_USER_REQUEST,UPDATE_USER_SUCCESS,BAN_FAILURE,BAN_REQUEST,BAN_SUCCESS,CHANGE_ROLE_FAILURE,CHANGE_ROLE_REQUEST,CHANGE_ROLE_SUCCESS,CHANGE_PASSWORD_FAILURE,CHANGE_PASSWORD_REQUEST,CHANGE_PASSWORD_SUCCESS,FIND_USER_BY_FAILURE,FIND_USER_BY_REQUEST,FIND_USER_BY_SUCCESS}from\"../../types\";export var isValidToken=function isValidToken(token){var decoded=jwt.decode(token);return new Date(decoded.exp*1000)>new Date()?decoded:null;};var initialState={currentUser:localStorage.getItem(\"USER-TOKEN\")?isValidToken(localStorage.getItem(\"USER-TOKEN\")):null,token:localStorage.getItem(\"USER-TOKEN\")?localStorage.getItem(\"USER-TOKEN\"):null,error:\"\",loading:false,isAuthenticated:false};var authenticationReducer=function authenticationReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SIGN_IN_REQUEST:case SIGN_UP_REQUEST:case SIGN_OUT_REQUEST:case FORGOT_PASSWORD_REQUEST:case RESET_PASSWORD_REQUEST:case CHANGE_PASSWORD_REQUEST:case GOOGLE_SIGN_IN_REQUEST:case BAN_REQUEST:case CHANGE_ROLE_REQUEST:case UPDATE_USER_REQUEST:case FIND_USER_BY_REQUEST:return _objectSpread(_objectSpread({},state),{},{loading:true,isAuthenticated:false});case SIGN_IN_FAILURE:case SIGN_UP_FAILURE:case SIGN_OUT_FAILURE:case FORGOT_PASSWORD_FAILURE:case RESET_PASSWORD_FAILURE:case CHANGE_PASSWORD_FAILURE:case GOOGLE_SIGN_IN_FAILURE:case BAN_FAILURE:case CHANGE_ROLE_FAILURE:case UPDATE_USER_FAILURE:case FIND_USER_BY_FAILURE:return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload,currentUser:null,isAuthenticated:false});case SIGN_UP_SUCCESS:case SIGN_IN_SUCCESS:case GOOGLE_SIGN_IN_SUCCESS:case FIND_USER_BY_SUCCESS:return _objectSpread(_objectSpread({},state),{},{loading:false,token:action.payload.token,currentUser:action.payload.user,isAuthenticated:true});case SIGN_OUT_SUCCESS:localStorage.removeItem(\"USER-TOKEN\");return _objectSpread(_objectSpread({},state),{},{isAuthenticated:false,loading:false,currentUser:null,token:\"\"});case RESET_PASSWORD_SUCCESS:case FORGOT_PASSWORD_SUCCESS:case UPDATE_USER_SUCCESS:case BAN_SUCCESS:case CHANGE_ROLE_SUCCESS:case CHANGE_PASSWORD_SUCCESS:return _objectSpread(_objectSpread({},state),{},{loading:false,token:action.payload,currentUser:action.payload,isAuthenticated:true});default:return _objectSpread({},state);}};export default authenticationReducer;","map":{"version":3,"sources":["/Users/Josephine/Documents/Integrify-full-stack/full-stack-4-typescript-men-boilerplate/frontend/src/redux/reducers/auth.ts"],"names":["jwt","SIGN_IN_FAILURE","SIGN_IN_REQUEST","SIGN_IN_SUCCESS","SIGN_UP_FAILURE","SIGN_UP_REQUEST","SIGN_UP_SUCCESS","SIGN_OUT_FAILURE","SIGN_OUT_REQUEST","SIGN_OUT_SUCCESS","FORGOT_PASSWORD_FAILURE","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","RESET_PASSWORD_FAILURE","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","GOOGLE_SIGN_IN_FAILURE","GOOGLE_SIGN_IN_REQUEST","GOOGLE_SIGN_IN_SUCCESS","UPDATE_USER_FAILURE","UPDATE_USER_REQUEST","UPDATE_USER_SUCCESS","BAN_FAILURE","BAN_REQUEST","BAN_SUCCESS","CHANGE_ROLE_FAILURE","CHANGE_ROLE_REQUEST","CHANGE_ROLE_SUCCESS","CHANGE_PASSWORD_FAILURE","CHANGE_PASSWORD_REQUEST","CHANGE_PASSWORD_SUCCESS","FIND_USER_BY_FAILURE","FIND_USER_BY_REQUEST","FIND_USER_BY_SUCCESS","isValidToken","token","decoded","decode","Date","exp","initialState","currentUser","localStorage","getItem","error","loading","isAuthenticated","authenticationReducer","state","action","type","payload","user","removeItem"],"mappings":"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","sourcesContent":["import jwt from \"jsonwebtoken\";\n\nimport {\n  SIGN_IN_FAILURE,\n  SIGN_IN_REQUEST,\n  SIGN_IN_SUCCESS,\n  SIGN_UP_FAILURE,\n  SIGN_UP_REQUEST,\n  SIGN_UP_SUCCESS,\n  SIGN_OUT_FAILURE,\n  SIGN_OUT_REQUEST,\n  SIGN_OUT_SUCCESS,\n  FORGOT_PASSWORD_FAILURE,\n  FORGOT_PASSWORD_REQUEST,\n  FORGOT_PASSWORD_SUCCESS,\n  RESET_PASSWORD_FAILURE,\n  RESET_PASSWORD_REQUEST,\n  RESET_PASSWORD_SUCCESS,\n  GOOGLE_SIGN_IN_FAILURE,\n  GOOGLE_SIGN_IN_REQUEST,\n  GOOGLE_SIGN_IN_SUCCESS,\n  UPDATE_USER_FAILURE,\n  UPDATE_USER_REQUEST,\n  UPDATE_USER_SUCCESS,\n  BAN_FAILURE,\n  BAN_REQUEST,\n  BAN_SUCCESS,\n  CHANGE_ROLE_FAILURE,\n  CHANGE_ROLE_REQUEST,\n  CHANGE_ROLE_SUCCESS,\n  CHANGE_PASSWORD_FAILURE,\n  CHANGE_PASSWORD_REQUEST,\n  CHANGE_PASSWORD_SUCCESS,\n  AuthenticateUsersInitialState,\n  FIND_USER_BY_FAILURE,\n  FIND_USER_BY_REQUEST,\n  FIND_USER_BY_SUCCESS,\n} from \"../../types\";\n\nexport const isValidToken = (token: any) => {\n  let decoded: any = jwt.decode(token);\n  return new Date(decoded.exp * 1000) > new Date() ? decoded : null;\n};\n\nconst initialState: AuthenticateUsersInitialState = {\n  currentUser: localStorage.getItem(\"USER-TOKEN\")\n    ? isValidToken(localStorage.getItem(\"USER-TOKEN\"))\n    : null,\n  token: localStorage.getItem(\"USER-TOKEN\")\n    ? localStorage.getItem(\"USER-TOKEN\")\n    : null,\n  error: \"\",\n  loading: false,\n  isAuthenticated: false,\n};\n\nconst authenticationReducer = function (state = initialState, action: any) {\n  switch (action.type) {\n    case SIGN_IN_REQUEST:\n    case SIGN_UP_REQUEST:\n    case SIGN_OUT_REQUEST:\n    case FORGOT_PASSWORD_REQUEST:\n    case RESET_PASSWORD_REQUEST:\n    case CHANGE_PASSWORD_REQUEST:\n    case GOOGLE_SIGN_IN_REQUEST:\n    case BAN_REQUEST:\n    case CHANGE_ROLE_REQUEST:\n    case UPDATE_USER_REQUEST:\n    case FIND_USER_BY_REQUEST:\n      return {\n        ...state,\n        loading: true,\n        isAuthenticated: false,\n      };\n    case SIGN_IN_FAILURE:\n    case SIGN_UP_FAILURE:\n    case SIGN_OUT_FAILURE:\n    case FORGOT_PASSWORD_FAILURE:\n    case RESET_PASSWORD_FAILURE:\n    case CHANGE_PASSWORD_FAILURE:\n    case GOOGLE_SIGN_IN_FAILURE:\n    case BAN_FAILURE:\n    case CHANGE_ROLE_FAILURE:\n    case UPDATE_USER_FAILURE:\n    case FIND_USER_BY_FAILURE:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n        currentUser: null,\n        isAuthenticated: false,\n      };\n    case SIGN_UP_SUCCESS:\n    case SIGN_IN_SUCCESS:\n    case GOOGLE_SIGN_IN_SUCCESS:\n    case FIND_USER_BY_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        token: action.payload.token,\n        currentUser: action.payload.user,\n        isAuthenticated: true,\n      };\n    case SIGN_OUT_SUCCESS:\n      localStorage.removeItem(\"USER-TOKEN\");\n      return {\n        ...state,\n        isAuthenticated: false,\n        loading: false,\n        currentUser: null,\n        token: \"\",\n      };\n    case RESET_PASSWORD_SUCCESS:\n    case FORGOT_PASSWORD_SUCCESS:\n    case UPDATE_USER_SUCCESS:\n    case BAN_SUCCESS:\n    case CHANGE_ROLE_SUCCESS:\n    case CHANGE_PASSWORD_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        token: action.payload,\n        currentUser: action.payload,\n        isAuthenticated: true,\n      };\n    default:\n      return { ...state };\n  }\n};\n\nexport default authenticationReducer;\n"]},"metadata":{},"sourceType":"module"}