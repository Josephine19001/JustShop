{"ast":null,"code":"import axios from\"axios\";import{SIGN_IN_FAILURE,SIGN_IN_REQUEST,SIGN_IN_SUCCESS,SIGN_UP_FAILURE,SIGN_UP_REQUEST,SIGN_UP_SUCCESS,SIGN_OUT_FAILURE,SIGN_OUT_REQUEST,SIGN_OUT_SUCCESS,RESET_PASSWORD_FAILURE,RESET_PASSWORD_REQUEST,RESET_PASSWORD_SUCCESS,FORGOT_PASSWORD_FAILURE,FORGOT_PASSWORD_REQUEST,FORGOT_PASSWORD_SUCCESS,GOOGLE_SIGN_IN_FAILURE,GOOGLE_SIGN_IN_REQUEST,GOOGLE_SIGN_IN_SUCCESS,UPDATE_USER_FAILURE,UPDATE_USER_REQUEST,UPDATE_USER_SUCCESS,CHANGE_PASSWORD_FAILURE,CHANGE_PASSWORD_REQUEST,CHANGE_PASSWORD_SUCCESS}from\"../../types\";import{alertFailure,alertSuccess}from\"./alert\";var baseURL=\"/api/v1/users\";//Sign up action creators\nvar signUpRequest=function signUpRequest(){return{type:SIGN_UP_REQUEST};};var signUpSuccess=function signUpSuccess(user,token){return{type:SIGN_UP_SUCCESS,payload:{user:user,token:token}};};var signUpFailure=function signUpFailure(error){return{type:SIGN_UP_FAILURE,payload:error};};export var signUp=function signUp(user,history){return function(dispatch){dispatch(signUpRequest());axios({method:\"post\",url:baseURL,data:user}).then(function(response){var _response$data=response.data,data=_response$data.data,token=_response$data.token;dispatch(signUpSuccess(data,token));dispatch(alertSuccess(\"Registration successful\"));history.push(\"/signin\");}).catch(function(error){dispatch(signUpFailure(error.response.data.message));dispatch(alertFailure(error.response.data.message));});};};//Sign in action creators\nvar signInRequest=function signInRequest(){return{type:SIGN_IN_REQUEST};};var signInSuccess=function signInSuccess(token,user){return{type:SIGN_IN_SUCCESS,payload:{token:token,user:user}};};var signInFailure=function signInFailure(error){return{type:SIGN_IN_FAILURE,payload:error};};export var signIn=function signIn(email,password,history){return function(dispatch){dispatch(signInRequest());axios({method:\"post\",url:\"\".concat(baseURL,\"/signin\"),data:{email:email,password:password},headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"USER-TOKEN\"))}}).then(function(response){var _response$data2=response.data,token=_response$data2.token,user=_response$data2.user;localStorage.setItem(\"USER-TOKEN\",token);dispatch(signInSuccess(token,user));dispatch(alertSuccess(\"Sign in successful\"));history.push(\"/admin\");}).catch(function(error){dispatch(signInFailure(error.response.data.message));dispatch(alertFailure(error.response.data.message));});};};//Google Sign in action creators\nvar googleSignInRequest=function googleSignInRequest(){return{type:GOOGLE_SIGN_IN_REQUEST};};var googleSignInSuccess=function googleSignInSuccess(token){return{type:GOOGLE_SIGN_IN_SUCCESS,payload:{// user,\ntoken:token}};};var googleSignInFailure=function googleSignInFailure(error){return{type:GOOGLE_SIGN_IN_FAILURE,payload:error};};export var googleSignIn=function googleSignIn(tokenId,history){return function(dispatch){dispatch(googleSignInRequest());axios({method:\"post\",url:\"\".concat(baseURL,\"/google-signin\"),headers:{Authorization:\"Bearer \".concat(tokenId)},data:{id_token:tokenId}}// { id_token: tokenId }\n).then(function(response){console.log(response);var token=response.data.token;localStorage.setItem(\"USER-TOKEN\",token);dispatch(googleSignInSuccess(token));history.push(\"/admin\");}).catch(function(error){dispatch(googleSignInFailure(error));});};};//sign out action creators\nexport var signOutRequest=function signOutRequest(){return{type:SIGN_OUT_REQUEST};};export var signOutSuccess=function signOutSuccess(){return{type:SIGN_OUT_SUCCESS};};export var signOutFailure=function signOutFailure(error){return{type:SIGN_OUT_FAILURE,payload:{error:error}};};export var signOut=function signOut(history){return function async(dispatch){dispatch(signOutRequest());try{dispatch(signOutSuccess());localStorage.clear();history.push(\"/\");}catch(error){dispatch(signOutFailure(error));}// if (localStorage.getItem(\"USER_TOKEN\")) {\n//   dispatch(apiFailure());\n// } else {\n//   dispatch(signOutSuccess());\n// }\n};};//forgot-password action creators\nexport var forgotPasswordRequest=function forgotPasswordRequest(){return{type:FORGOT_PASSWORD_REQUEST};};export var forgotPasswordSuccess=function forgotPasswordSuccess(){return{type:FORGOT_PASSWORD_SUCCESS};};export var forgotPasswordFailure=function forgotPasswordFailure(error){return{type:FORGOT_PASSWORD_FAILURE,payload:error};};export var forgotPassword=function forgotPassword(email){return function(dispatch){dispatch(forgotPasswordRequest());axios({method:\"post\",url:\"\".concat(baseURL,\"/forgot-password\"),data:{email:email}}).then(function(response){dispatch(forgotPasswordSuccess());dispatch(alertSuccess(\"Email successfully sent\"));}).catch(function(error){dispatch(forgotPasswordFailure(error.response.data.message));dispatch(alertFailure(error.response.data.message));});};};//reset password action creators\nexport var resetPasswordRequest=function resetPasswordRequest(){return{type:RESET_PASSWORD_REQUEST};};export var resetPasswordSuccess=function resetPasswordSuccess(token,password){return{type:RESET_PASSWORD_SUCCESS,payload:{token:token,password:password}};};export var resetPasswordFailure=function resetPasswordFailure(error){return{type:RESET_PASSWORD_FAILURE,payload:error};};export var resetPassword=function resetPassword(password,resetToken){return function(dispatch){dispatch(resetPasswordRequest());axios({method:\"put\",url:\"\".concat(baseURL,\"/reset-password/\").concat(resetToken),data:password,headers:{Authorization:\"Bearer \".concat(resetToken)}}).then(function(response){var _response$data3=response.data,token=_response$data3.token,password=_response$data3.password;dispatch(resetPasswordSuccess(token,password));localStorage.setItem(\"USER_TOKEN\",token);}).catch(function(error){dispatch(resetPasswordFailure(error.response.data.message));});};};// Update Profile\nexport var updateProfileRequest=function updateProfileRequest(){return{type:UPDATE_USER_REQUEST};};export var updateProfileSuccess=function updateProfileSuccess(user,token){return{type:UPDATE_USER_SUCCESS,payload:{user:user,token:token}};};export var updateProfileFailure=function updateProfileFailure(error){return{type:UPDATE_USER_FAILURE,payload:{error:error}};};export var updateProfile=function updateProfile(user){return function(dispatch){dispatch(updateProfileRequest());axios({method:\"put\",url:\"\".concat(baseURL,\"/update\"),headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"USER-TOKEN\"))},data:user}).then(function(response){var _response$data4=response.data,user=_response$data4.user,token=_response$data4.token;dispatch(updateProfileSuccess(user,token));dispatch(alertSuccess(\"Profile successfully updated\"));}).catch(function(error){dispatch(updateProfileFailure(error.response.data.message));dispatch(alertFailure(\"Some details are missing, fill in required fields\"));});};};// Change password\nexport var changePasswordRequest=function changePasswordRequest(){return{type:CHANGE_PASSWORD_REQUEST};};export var changePasswordSuccess=function changePasswordSuccess(user){return{type:CHANGE_PASSWORD_SUCCESS,payload:{user:user}};};export var changePasswordFailure=function changePasswordFailure(error){return{type:CHANGE_PASSWORD_FAILURE,payload:{error:error}};};export var changePassword=function changePassword(email,oldPassword,newPassword){return function(dispatch){dispatch(changePasswordRequest());axios({method:\"put\",url:\"\".concat(baseURL,\"/change-password\"),headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"USER-TOKEN\"))},data:{email:email,oldPassword:oldPassword,newPassword:newPassword}}).then(function(response){var res=response.data;dispatch(changePasswordSuccess(res));dispatch(alertSuccess(\"Password Changed\"));}).catch(function(error){dispatch(changePasswordFailure(error.response.data.message));dispatch(alertFailure(error.response.data.message));});};};","map":{"version":3,"sources":["/Users/Josephine/Documents/Integrify-full-stack/full-stack-4-typescript-men-boilerplate/frontend/src/redux/actions/auth.ts"],"names":["axios","SIGN_IN_FAILURE","SIGN_IN_REQUEST","SIGN_IN_SUCCESS","SIGN_UP_FAILURE","SIGN_UP_REQUEST","SIGN_UP_SUCCESS","SIGN_OUT_FAILURE","SIGN_OUT_REQUEST","SIGN_OUT_SUCCESS","RESET_PASSWORD_FAILURE","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILURE","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","GOOGLE_SIGN_IN_FAILURE","GOOGLE_SIGN_IN_REQUEST","GOOGLE_SIGN_IN_SUCCESS","UPDATE_USER_FAILURE","UPDATE_USER_REQUEST","UPDATE_USER_SUCCESS","CHANGE_PASSWORD_FAILURE","CHANGE_PASSWORD_REQUEST","CHANGE_PASSWORD_SUCCESS","alertFailure","alertSuccess","baseURL","signUpRequest","type","signUpSuccess","user","token","payload","signUpFailure","error","signUp","history","dispatch","method","url","data","then","response","push","catch","message","signInRequest","signInSuccess","signInFailure","signIn","email","password","headers","Authorization","localStorage","getItem","setItem","googleSignInRequest","googleSignInSuccess","googleSignInFailure","googleSignIn","tokenId","id_token","console","log","signOutRequest","signOutSuccess","signOutFailure","signOut","async","clear","forgotPasswordRequest","forgotPasswordSuccess","forgotPasswordFailure","forgotPassword","resetPasswordRequest","resetPasswordSuccess","resetPasswordFailure","resetPassword","resetToken","updateProfileRequest","updateProfileSuccess","updateProfileFailure","updateProfile","changePasswordRequest","changePasswordSuccess","changePasswordFailure","changePassword","oldPassword","newPassword","res"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { Dispatch } from \"redux\";\n\nimport {\n  SIGN_IN_FAILURE,\n  SIGN_IN_REQUEST,\n  SIGN_IN_SUCCESS,\n  SIGN_UP_FAILURE,\n  SIGN_UP_REQUEST,\n  SIGN_UP_SUCCESS,\n  SIGN_OUT_FAILURE,\n  SIGN_OUT_REQUEST,\n  SIGN_OUT_SUCCESS,\n  RESET_PASSWORD_FAILURE,\n  RESET_PASSWORD_REQUEST,\n  RESET_PASSWORD_SUCCESS,\n  FORGOT_PASSWORD_FAILURE,\n  FORGOT_PASSWORD_REQUEST,\n  FORGOT_PASSWORD_SUCCESS,\n  GOOGLE_SIGN_IN_FAILURE,\n  GOOGLE_SIGN_IN_REQUEST,\n  GOOGLE_SIGN_IN_SUCCESS,\n  UPDATE_USER_FAILURE,\n  UPDATE_USER_REQUEST,\n  UPDATE_USER_SUCCESS,\n  CHANGE_PASSWORD_FAILURE,\n  CHANGE_PASSWORD_REQUEST,\n  CHANGE_PASSWORD_SUCCESS,\n  UserState,\n  PasswordChangeState,\n} from \"../../types\";\nimport { alertClear, alertFailure, alertSuccess } from \"./alert\";\n\nconst baseURL = \"/api/v1/users\";\n\n//Sign up action creators\nconst signUpRequest = () => {\n  return {\n    type: SIGN_UP_REQUEST,\n  };\n};\nconst signUpSuccess = (user: UserState, token: string) => {\n  return {\n    type: SIGN_UP_SUCCESS,\n    payload: {\n      user,\n      token,\n    },\n  };\n};\nconst signUpFailure = (error: string) => {\n  return {\n    type: SIGN_UP_FAILURE,\n    payload: error,\n  };\n};\n\nexport const signUp = (user: UserState, history: any) => {\n  return function (dispatch: Dispatch) {\n    dispatch(signUpRequest());\n\n    axios({\n      method: \"post\",\n      url: baseURL,\n      data: user,\n    })\n      .then((response) => {\n        const { data, token } = response.data;\n        dispatch(signUpSuccess(data, token));\n        dispatch(alertSuccess(\"Registration successful\"));\n        history.push(\"/signin\");\n      })\n      .catch((error: any) => {\n        dispatch(signUpFailure(error.response.data.message));\n        dispatch(alertFailure(error.response.data.message));\n      });\n  };\n};\n\n//Sign in action creators\nconst signInRequest = () => {\n  return {\n    type: SIGN_IN_REQUEST,\n  };\n};\nconst signInSuccess = (token: string, user: UserState) => {\n  return {\n    type: SIGN_IN_SUCCESS,\n    payload: {\n      token,\n      user,\n    },\n  };\n};\nconst signInFailure = (error: string) => {\n  return {\n    type: SIGN_IN_FAILURE,\n    payload: error,\n  };\n};\nexport const signIn = (email: string, password: string, history: any) => {\n  return function (dispatch: Dispatch) {\n    dispatch(signInRequest());\n\n    axios({\n      method: \"post\",\n      url: `${baseURL}/signin`,\n      data: { email, password },\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"USER-TOKEN\")}`,\n      },\n    })\n      .then((response) => {\n        const { token, user } = response.data;\n        localStorage.setItem(\"USER-TOKEN\", token);\n        dispatch(signInSuccess(token, user));\n        dispatch(alertSuccess(\"Sign in successful\"));\n        history.push(\"/admin\");\n      })\n      .catch((error) => {\n        dispatch(signInFailure(error.response.data.message));\n\n        dispatch(alertFailure(error.response.data.message));\n      });\n  };\n};\n\n//Google Sign in action creators\n\nconst googleSignInRequest = () => {\n  return {\n    type: GOOGLE_SIGN_IN_REQUEST,\n  };\n};\nconst googleSignInSuccess = (token: string) => {\n  return {\n    type: GOOGLE_SIGN_IN_SUCCESS,\n    payload: {\n      // user,\n      token,\n    },\n  };\n};\nconst googleSignInFailure = (error: string) => {\n  return {\n    type: GOOGLE_SIGN_IN_FAILURE,\n    payload: error,\n  };\n};\n\nexport const googleSignIn = (tokenId: string, history: any) => {\n  return function (dispatch: Dispatch) {\n    dispatch(googleSignInRequest());\n    axios(\n      {\n        method: \"post\",\n        url: `${baseURL}/google-signin`,\n        headers: {\n          Authorization: `Bearer ${tokenId}`,\n        },\n        data: { id_token: tokenId },\n      }\n\n      // { id_token: tokenId }\n    )\n      .then((response) => {\n        console.log(response);\n\n        const { token } = response.data;\n        localStorage.setItem(\"USER-TOKEN\", token);\n        dispatch(googleSignInSuccess(token));\n        history.push(\"/admin\");\n      })\n      .catch((error) => {\n        dispatch(googleSignInFailure(error));\n      });\n  };\n};\n\n//sign out action creators\nexport const signOutRequest = function () {\n  return {\n    type: SIGN_OUT_REQUEST,\n  };\n};\n\nexport const signOutSuccess = function () {\n  return {\n    type: SIGN_OUT_SUCCESS,\n  };\n};\n\nexport const signOutFailure = function (error: string) {\n  return {\n    type: SIGN_OUT_FAILURE,\n    payload: {\n      error,\n    },\n  };\n};\n\nexport const signOut = function (history: any) {\n  return function async(dispatch: Dispatch) {\n    dispatch(signOutRequest());\n    try {\n      dispatch(signOutSuccess());\n      localStorage.clear();\n      history.push(\"/\");\n    } catch (error) {\n      dispatch(signOutFailure(error));\n    }\n    // if (localStorage.getItem(\"USER_TOKEN\")) {\n    //   dispatch(apiFailure());\n    // } else {\n    //   dispatch(signOutSuccess());\n    // }\n  };\n};\n\n//forgot-password action creators\nexport const forgotPasswordRequest = function () {\n  return {\n    type: FORGOT_PASSWORD_REQUEST,\n  };\n};\n\nexport const forgotPasswordSuccess = function () {\n  return {\n    type: FORGOT_PASSWORD_SUCCESS,\n  };\n};\n\nexport const forgotPasswordFailure = function (error: string) {\n  return {\n    type: FORGOT_PASSWORD_FAILURE,\n    payload: error,\n  };\n};\n\nexport const forgotPassword = function (email: string) {\n  return function (dispatch: Dispatch) {\n    dispatch(forgotPasswordRequest());\n    axios({\n      method: \"post\",\n      url: `${baseURL}/forgot-password`,\n      data: { email },\n    })\n      .then((response) => {\n        dispatch(forgotPasswordSuccess());\n        dispatch(alertSuccess(\"Email successfully sent\"));\n      })\n      .catch((error) => {\n        dispatch(forgotPasswordFailure(error.response.data.message));\n        dispatch(alertFailure(error.response.data.message));\n      });\n  };\n};\n\n//reset password action creators\nexport const resetPasswordRequest = function () {\n  return {\n    type: RESET_PASSWORD_REQUEST,\n  };\n};\n\nexport const resetPasswordSuccess = function (token: any, password: any) {\n  return {\n    type: RESET_PASSWORD_SUCCESS,\n    payload: { token, password },\n  };\n};\n\nexport const resetPasswordFailure = function (error: any) {\n  return {\n    type: RESET_PASSWORD_FAILURE,\n    payload: error,\n  };\n};\n\nexport const resetPassword = function (password: string, resetToken: string) {\n  return function (dispatch: Dispatch) {\n    dispatch(resetPasswordRequest());\n    axios({\n      method: \"put\",\n      url: `${baseURL}/reset-password/${resetToken}`,\n      data: password,\n      headers: {\n        Authorization: `Bearer ${resetToken}`,\n      },\n    })\n      .then((response) => {\n        const { token, password } = response.data;\n        dispatch(resetPasswordSuccess(token, password));\n        localStorage.setItem(\"USER_TOKEN\", token);\n      })\n      .catch((error) => {\n        dispatch(resetPasswordFailure(error.response.data.message));\n      });\n  };\n};\n\n// Update Profile\n\nexport const updateProfileRequest = () => {\n  return {\n    type: UPDATE_USER_REQUEST,\n  };\n};\nexport const updateProfileSuccess = (user: UserState, token: string) => {\n  return {\n    type: UPDATE_USER_SUCCESS,\n    payload: {\n      user,\n      token,\n    },\n  };\n};\nexport const updateProfileFailure = (error: string) => {\n  return {\n    type: UPDATE_USER_FAILURE,\n    payload: {\n      error,\n    },\n  };\n};\n\nexport const updateProfile = (user: UserState) => {\n  return function (dispatch: Dispatch) {\n    dispatch(updateProfileRequest());\n\n    axios({\n      method: \"put\",\n      url: `${baseURL}/update`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"USER-TOKEN\")}`,\n      },\n      data: user,\n    })\n      .then((response) => {\n        const { user, token } = response.data;\n        dispatch(updateProfileSuccess(user, token));\n        dispatch(alertSuccess(\"Profile successfully updated\"));\n      })\n      .catch((error) => {\n        dispatch(updateProfileFailure(error.response.data.message));\n        dispatch(\n          alertFailure(\"Some details are missing, fill in required fields\")\n        );\n      });\n  };\n};\n\n// Change password\nexport const changePasswordRequest = () => {\n  return {\n    type: CHANGE_PASSWORD_REQUEST,\n  };\n};\nexport const changePasswordSuccess = (user: UserState) => {\n  return {\n    type: CHANGE_PASSWORD_SUCCESS,\n    payload: { user },\n  };\n};\nexport const changePasswordFailure = (error: string) => {\n  return {\n    type: CHANGE_PASSWORD_FAILURE,\n    payload: {\n      error,\n    },\n  };\n};\n\nexport const changePassword = (\n  email: string,\n  oldPassword: string,\n  newPassword: string\n) => {\n  return function (dispatch: Dispatch) {\n    dispatch(changePasswordRequest());\n\n    axios({\n      method: \"put\",\n      url: `${baseURL}/change-password`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"USER-TOKEN\")}`,\n      },\n      data: { email, oldPassword, newPassword },\n    })\n      .then((response) => {\n        const res = response.data;\n        dispatch(changePasswordSuccess(res));\n        dispatch(alertSuccess(\"Password Changed\"));\n      })\n      .catch((error) => {\n        dispatch(changePasswordFailure(error.response.data.message));\n        dispatch(alertFailure(error.response.data.message));\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}